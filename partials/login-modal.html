<div class="auth-modal">
  <button class="auth-modal__close">&times;</button>
  <div class="auth-modal__title">Вхід</div>
  <div class="auth-modal__switch">Немає акаунта? <a href="#" id="openRegisterModal">Реєстрація</a></div>
  <form class="auth-modal__form" id="loginForm">
    <input class="auth-modal__input" type="email" name="Email" placeholder="E-mail" required>
    <input class="auth-modal__input" type="password" name="Password" placeholder="Пароль" required>
    <button class="auth-modal__button" type="submit">Увійти</button>
  </form>
</div>
<style>
  .auth-modal {
    max-width: 540px;
    margin: 40px auto;
    background: #faf9f6;
    border-radius: 56px;
    box-shadow: 0 4px 32px rgba(0,0,0,0.08);
    padding: 64px 40px 40px 40px;
    position: relative;
    font-family: 'Montserrat', sans-serif;
    color: #333;
  }
  .auth-modal__close {
    position: absolute;
    top: 32px;
    right: 32px;
    font-size: 2rem;
    color: #222;
    background: none;
    border: none;
    cursor: pointer;
    font-family: inherit;
  }
  .auth-modal__title {
    text-align: center;
    color: #4CAF50;
    font-size: 56px;
    font-weight: 900;
    margin-bottom: 8px;
    font-family: 'Montserrat', sans-serif;
    line-height: 1.05;
    letter-spacing: -2px;
  }
  .auth-modal__switch {
    text-align: center;
    margin-bottom: 32px;
    font-size: 1.1rem;
    color: #333;
    font-family: 'Montserrat', sans-serif;
  }
  .auth-modal__switch a {
    color: #4CAF50;
    text-decoration: none;
    font-weight: 500;
    margin-left: 4px;
    font-family: inherit;
  }
  .auth-modal__form {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 24px;
    font-family: 'Montserrat', sans-serif;
  }
  .auth-modal__input {
    border: none;
    border-bottom: 2px solid #bdbdbd;
    background: transparent;
    padding: 10px 0;
    font-size: 1.1rem;
    outline: none;
    transition: border-color 0.2s;
    color: #333;
    font-family: 'Montserrat', sans-serif;
  }
  .auth-modal__input::placeholder {
    color: #a0a0a0;
    font-family: 'Montserrat', sans-serif;
    opacity: 1;
  }
  .auth-modal__input:focus {
    border-color: #4CAF50;
  }
  .auth-modal__button {
    background: #4CAF50;
    color: #fff;
    border: none;
    border-radius: 24px;
    padding: 12px 0;
    font-size: 1.2rem;
    font-weight: 500;
    cursor: pointer;
    margin-top: 8px;
    margin-bottom: 8px;
    transition: background 0.2s;
    font-family: 'Montserrat', sans-serif;
  }
  .auth-modal__button:hover {
    background: #388e3c;
  }
  @media (max-width: 600px) {
    .auth-modal {
      padding: 32px 8px 24px 8px;
      border-radius: 32px;
    }
    .auth-modal__title {
      font-size: 38px;
    }
  }
</style>
  <script>
    // Замените на ваш URL сервера авторизации
    const LOGIN_URL = 'https://77.47.205.162:5000/user/login'; // <-- ВАША ССЫЛКА

    document.addEventListener('DOMContentLoaded', function() {
      const loginForm = document.getElementById('loginForm');
      if (loginForm) {
        loginForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          const formData = new FormData(loginForm);
          // Собираем только Email и Password для DTO Login
          const data = {
            Email: formData.get('Email'),
            Password: formData.get('Password')
          };
          try {
            const response = await fetch(LOGIN_URL, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(data),
            });
            let result;
            let errorText = '';
            try {
              result = await response.clone().json();
            } catch (e) {
              errorText = await response.text();
            }
            if (!response.ok) {
              if (result && result.message) {
                alert('Ошибка входа: ' + result.message);
              } else if (errorText) {
                alert('Ошибка входа: ' + errorText);
              } else {
                alert('Ошибка входа: Неизвестная ошибка');
              }
              return;
            }
            if (result && result.id) {
              localStorage.setItem('userId', result.id);
              // Сохраняем часть email до @
              if (data.Email && data.Email.includes('@')) {
                const userName = data.Email.split('@')[0];
                localStorage.setItem('userName', userName);
              }
              // Можно добавить редирект или сообщение об успехе
            } else {
              alert('Ошибка входа: Некорректный ответ сервера');
            }
          } catch (error) {
            alert('Ошибка входа: ' + error.message);
          }
        });
      }
    });
  </script> 